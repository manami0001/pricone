import{c as V,a7 as w,g as S,a8 as B,b as _,h as b,H as x,K as i,L as c,M as r,N as Q,O as o,P as h,R as v,S as s,U as f,V as M,a6 as O,W as k,X as p,Y as q,Z as y,a3 as D,a1 as E,a9 as g,a2 as I,a4 as N}from"./index-DI4HIZpi.js";import{Q as C,a as d,b as R}from"./QBtnToggle-DR_SOAx5.js";const T=["horizontal","vertical","cell","none"],U=V({name:"QMarkupTable",props:{...w,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:a=>T.includes(a)}},setup(a,{slots:e}){const t=S(),l=B(a,t.proxy.$q),u=_(()=>`q-markup-table q-table__container q-table__card q-table--${a.separator}-separator`+(l.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(a.dense===!0?" q-table--dense":"")+(a.flat===!0?" q-table--flat":"")+(a.bordered===!0?" q-table--bordered":"")+(a.square===!0?" q-table--square":"")+(a.wrapCells===!1?" q-table--no-wrap":""));return()=>b("div",{class:u.value},[b("table",{class:"q-table"},x(e.default))])}}),H=s("div",{class:"text-caption"}," ・ドラッグモード：ドラッグアンドドロップで移動 ",-1),L=s("div",{class:"text-caption"}," ・クリックモード：クリックで指定したランクに移動 ",-1),W={class:"q-px-md q-py-xs q-ma-xs rounded-borders bg-grey-1"},$=s("span",null,"状態",-1),j={class:"q-px-md q-py-xs q-ma-xs rounded-borders bg-grey-1"},z=s("span",null,"入手手段",-1),A={class:"q-px-md q-py-xs q-ma-xs rounded-borders bg-grey-1"},P=s("span",null,"攻撃方法",-1),F={class:"q-px-md q-py-xs q-ma-xs rounded-borders bg-grey-1"},G=s("span",null,"属性",-1),K={class:"q-gutter-xs row"},X=["id"],Y=["id","src"],Z={inject:["checkList","staticChars"],data(){return{ranks:[{label:"S",value:"S",color:"red"},{label:"A",value:"A",color:"orange"},{label:"B",value:"B",color:"yellow"},{label:"C",value:"C",color:"green"},{label:"D",value:"D",color:"blue"},{label:"E",value:"E",color:"purple"},{label:"Hold",value:"Hold",color:"grey"}],rankData:[],clicRank:"S",element:"全て",elements:[{label:"全て",value:"全て",color:"black"},{label:"火",value:"火",color:"red"},{label:"水",value:"水",color:"blue"},{label:"風",value:"風",color:"green"},{label:"光",value:"光",color:"amber"},{label:"闇",value:"闇",color:"purple"}],statusOptions:[{label:"所持",value:"maru",color:"positive"},{label:"未所持",value:"batsu",color:"negative"}],status:["maru","batsu"],getMethodOptions:[{label:"限定",value:"limited"},{label:"恒常",value:"permanent"},{label:"低レア",value:"low"},{label:"イベント",value:"event"},{label:"その他",value:"other"}],getMethod:["limited","permanent","low","event","other"],attackOptions:[{label:"物理",value:"b"},{label:"魔法",value:"m"}],attack:["b","m"],isTairetsu:!1,isDraggable:!0}},mounted(){this.setRankData()},methods:{setRankData(){this.rankData=[{rank:"Hold",chars:this.staticChars}]},onDragStart(a){a.dataTransfer.setData("text/plain",a.target.id)},onDrop(a){a.preventDefault();const e=a.dataTransfer.getData("text/plain");if(e.startsWith("char")){const t=document.getElementById(e);if(a.target.id==e)return;a.target.id.startsWith("char")?(t.parentNode.removeChild(t),a.target.parentNode.insertBefore(t,a.target)):(t.parentNode.removeChild(t),a.target.appendChild(t))}},onClick(a){if(!this.isDraggable&&a.target.id.startsWith("char")){const e=document.getElementById("rank"+this.clicRank);a.target.remove(),e.appendChild(a.target)}},isShow(a,e,t=!1){return(e=="全て"||a.element==e)&&this.getMethod.includes(a.getMethod)&&this.attack.includes(a.attack)&&(t||this.status.includes(a.having?"maru":"batsu"))},charCount(a){return a=="全て"?this.staticChars.filter(e=>this.isShow(e,a,!0)).length:this.staticChars.filter(e=>this.isShow(e,a,!0)&&e.element==a).length},havingCharCount(a){return a=="全て"?this.staticChars.filter(e=>this.isShow(e,a,!0)&&e.having).length:this.staticChars.filter(e=>this.isShow(e,a,!0)&&e.having&&e.element==a).length}}},ae=Object.assign(Z,{__name:"Tier",setup(a){return(e,t)=>(i(),c(Q,{separator:""},{default:r(()=>[o(C,{icon:"info",label:"使い方",caption:"クリックで開閉","expand-icon":"expand_more","expanded-icon":"expand_less"},{default:r(()=>[o(h,null,{default:r(()=>[o(v,{class:"q-py-xs"},{default:r(()=>[H,L]),_:1})]),_:1})]),_:1}),o(C,{icon:"filter_alt",label:"絞り込み",caption:"クリックで開閉","expand-icon":"expand_more","expanded-icon":"expand_less"},{default:r(()=>[o(h,null,{default:r(()=>[o(v,{class:"q-py-xs q-gutter-xs row"},{default:r(()=>[s("div",W,[$,o(d,{name:"accepted_genres",modelValue:e.status,"onUpdate:modelValue":t[0]||(t[0]=l=>e.status=l),options:e.statusOptions,type:"checkbox",inline:""},null,8,["modelValue","options"])]),s("div",j,[z,o(d,{name:"accepted_genres",modelValue:e.getMethod,"onUpdate:modelValue":t[1]||(t[1]=l=>e.getMethod=l),options:e.getMethodOptions,type:"checkbox",color:"primary",inline:""},null,8,["modelValue","options"])]),s("div",A,[P,o(d,{name:"accepted_genres",modelValue:e.attack,"onUpdate:modelValue":t[2]||(t[2]=l=>e.attack=l),options:e.attackOptions,type:"checkbox",color:"primary",inline:""},null,8,["modelValue","options"])]),s("div",F,[G,o(d,{name:"accepted_genres",modelValue:e.element,"onUpdate:modelValue":t[3]||(t[3]=l=>e.element=l),options:e.elements,type:"radio",color:"primary",inline:""},null,8,["modelValue","options"])])]),_:1})]),_:1})]),_:1}),o(k,null,{default:r(()=>[o(f,{avatar:""},{default:r(()=>[o(M,{name:"mode"})]),_:1}),o(f,{class:"q-py-xs"},{default:r(()=>[s("div",K,[o(R,{modelValue:e.isDraggable,"onUpdate:modelValue":t[4]||(t[4]=l=>e.isDraggable=l),color:"white","text-color":"primary","toggle-color":"primary",unelevated:"",rounded:"",style:{border:"1px solid var(--q-primary)"},options:[{label:"ドラッグ",value:!0},{label:"クリック",value:!1}]},null,8,["modelValue"]),e.isDraggable?O("",!0):(i(),c(d,{key:0,name:"accepted_genres",modelValue:e.clicRank,"onUpdate:modelValue":t[5]||(t[5]=l=>e.clicRank=l),options:e.ranks,type:"radio",color:"primary",inline:""},null,8,["modelValue","options"]))])]),_:1})]),_:1}),o(k,{class:"q-px-none"},{default:r(()=>[o(U,null,{default:r(()=>[s("tbody",null,[(i(!0),p(y,null,q(e.ranks,l=>{var u;return i(),p("tr",null,[s("th",{class:D(`bg-${l.color}`),style:{width:"fit-content"}},E(l.label),3),s("td",null,[s("div",{class:"row fit",onDragenter:t[8]||(t[8]=g(()=>{},["prevent"])),onDragleave:t[9]||(t[9]=g(()=>{},["prevent"])),onDragover:t[10]||(t[10]=g(()=>{},["prevent"])),onDrop:t[11]||(t[11]=(...n)=>e.onDrop&&e.onDrop(...n)),id:"rank"+l.label},[(i(!0),p(y,null,q((u=e.rankData.find(n=>n.rank==l.label))==null?void 0:u.chars,n=>I((i(),p("img",{id:"char"+n.name,src:`/pricone/image/${n.name}.jpg`,onDragstart:t[6]||(t[6]=(...m)=>e.onDragStart&&e.onDragStart(...m)),onClick:t[7]||(t[7]=(...m)=>e.onClick&&e.onClick(...m)),draggable:"true",class:D(["char-small-img",[n.having?"maru":"batsu"]])},null,42,Y)),[[N,e.isShow(n,e.element)]])),256))],40,X)])])}),256))])]),_:1})]),_:1})]),_:1}))}});export{ae as default};
